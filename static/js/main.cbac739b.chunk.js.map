{"version":3,"sources":["Components/Playlist.js","Components/Home.js","Components/Header.js","Components/Login.js","Components/ArtistForm.js","Components/Player.js","Components/ScriptCache.js","Components/App.js","index.js"],"names":["Playlist","props","display","playlist","map","song","onClick","play","uri","name","Home","useState","ids","setIds","features","setFeatures","seasonSorted","useEffect","fetch","artist","headers","Authorization","access","then","res","json","popSort","tracks","items","sort","a","b","popularity","forTracks","isDupe","console","log","i","length","popTest","split","j","trackTest","includes","push","cover","album","images","artists","id","forIds","forEach","track","setTracks","join","seasonScore","danceability","energy","valence","score","toFixed","scoreIncrement","obj","Header","Login","href","ArtistForm","formArtist","onSubmit","event","preventDefault","setArtist","catch","err","type","placeholder","onChange","target","value","Player","currentlyPlaying","playerId","method","ScriptCache","scripts","onSuccess","this","loaded","failed","pending","callbacks","load","script","loadSrc","callback","src","indexOf","Promise","resolve","scriptTag","hasOwnProperty","cb","reject","resolved","errored","body","document","getElementsByTagName","tag","createElement","async","onreadystatechange","handleLoad","handleReject","state","readyState","evt","splice","addEventListener","appendChild","App","setPlayerId","setAccess","setRefresh","setId","JSON","stringify","window","onSpotifyWebPlaybackSDKReady","token","player","Spotify","getOAuthToken","addListener","message","error","device_id","connect","parsed","require","parse","location","search","accesstoken","refreshtoken","ReactDOM","render","getElementById"],"mappings":"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","file":"static/js/main.cbac739b.chunk.js","sourcesContent":["import React from 'react';\n\nfunction Playlist(props) {\n    let display = [];\n\n    if (props.playlist) {\n    display = props.playlist.map(song => {\n        \n    return <li onClick={() => props.play(song.uri)}>{song.name}</li>\n})\n    }\n    return (\n\t\t\t<div>\n                <ul>{display || 'LOADING'}</ul>\n\t\t\t</div>\n\t\t);\n}\n\nexport default Playlist;","import React, { useState, useEffect } from 'react';\nimport Playlist from './Playlist';\n\nfunction Home(props) {\n\tlet [ids, setIds] = useState([]);\n\tlet [features, setFeatures] = useState([]);\n\tlet seasonSorted = [];\n\n\t//get tracks\n\tuseEffect(() => {\n\t\t//get 50 tracks from artist\n\t\tfetch(\n\t\t\t`https://api.spotify.com/v1/search?q=artist:${\n\t\t\t\tprops.artist.name || 'Ying Yang Twins'\n\t\t\t}&type=track&limit=50`,\n\t\t\t{\n\t\t\t\theaders: {\n\t\t\t\t\t'Content-Type': 'application/json',\n\t\t\t\t\tAuthorization: `Bearer ${props.access}`,\n\t\t\t\t},\n\t\t\t}\n\t\t)\n\t\t\t.then((res) => res.json())\n\t\t\t.then((res) => {\n\t\t\t\t//popularity value sort\n\t\t\t\tlet popSort = res.tracks.items.sort(function (a, b) {\n\t\t\t\t\treturn b.popularity - a.popularity;\n\t\t\t\t});\n\t\t\t\t//grab relevant values out of track object\n\t\t\t\tlet forTracks = [];\n\t\t\t\tlet isDupe = false;\n\t\t\t\tconsole.log(popSort)\n\t\t\t\t\n\t\t\t\tfor (let i = 0; i < popSort.length; i++) {\n\t\t\t\t\tisDupe = false;\n\t\t\t\t\tlet popTest = popSort[i].name.split('(')[0];\n\t\t\t\t\tfor (let j = 0; j < forTracks.length; j++) {\n\t\t\t\t\t\tlet trackTest = forTracks[j].name.split('(')[0];\n\t\t\t\t\t\tif (popTest.includes(trackTest) || trackTest.includes(popTest)) {\n\t\t\t\t\t\t\tisDupe = true;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t} \n\t\t\t\t\tif (isDupe === false) {\n\t\t\t\t\tforTracks.push({\n\t\t\t\t\t\t\tname: popSort[i].name,\n\t\t\t\t\t\t\tcover: popSort[i].album.images[2],\n\t\t\t\t\t\t\tartists: popSort[i].artists,\n\t\t\t\t\t\t\tid: popSort[i].id,\n\t\t\t\t\t\t\turi: popSort[i].uri,\n\t\t\t\t\t\t});\t\n\t\t\t\t\t}\n\t\t\t\t\t} \n\t\t\t\t//grab IDs for audio features search and set track objects in state\n\t\t\t\tlet forIds = [];\n\t\t\t\tforTracks.forEach((track) => forIds.push(track.id));\n\t\t\t\tsetIds(forIds);\n\t\t\t\tconsole.log(forTracks)\n\t\t\t\tprops.setTracks(forTracks);\n\t\t\t});\n\t}, [props.artist]);\n\t//once tracks are set, use ids to set audio features\n\tuseEffect(() => {\n\t\tfetch(`https://api.spotify.com/v1/audio-features/?ids=${ids.join(',')}`, {\n\t\t\theaders: {\n\t\t\t\t'Content-Type': 'application/json',\n\t\t\t\tAuthorization: `Bearer ${props.access}`,\n\t\t\t},\n\t\t})\n\t\t\t.then((res) => res.json())\n\t\t\t.then((res) => {\n\t\t\t\tsetFeatures(res['audio_features']);\n\t\t\t});\n\t}, [props.tracks]);\n\n\t//if features are set, sort by feature values\n\tif (features.length > 10) {\n\t\tlet seasonScore = [];\n\t\tconsole.log(features);\n\t\tfor (let i = 0; i < features.length; i++) {\n\t\t\t//some songs might not have audio features\n\t\t\tif (\n\t\t\t\t!features[i].danceability ||\n\t\t\t\t!features[i].energy ||\n\t\t\t\t!features[i].valence\n\t\t\t) {\n\t\t\t\tseasonScore.push(-1);\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tlet score = 0;\n\t\t\tscore =\n\t\t\t\t(features[i].danceability + features[i].energy +\n\t\t\t\tfeatures[i].valence) / 3;\n\t\t\tseasonScore.push(score.toFixed(3));\n\t\t}\n\n\t\tconsole.log(seasonScore);\n\t\tlet scoreIncrement = 0;\n\t\tprops.tracks.forEach((obj) => {\n\t\t\tobj.seasonScore = seasonScore[scoreIncrement];\n\t\t\tscoreIncrement++;\n\t\t});\n\t\tconsole.log(props.tracks);\n\t\tseasonSorted = props.tracks.sort(function (a, b) {\n\t\t\treturn b.seasonScore - a.seasonScore;\n\t\t});\n\t\tconsole.log(seasonSorted);\n\t\t\n\t}\n\n\treturn (\n\t\t<div>\n\t\t\t<Playlist play={props.play} playlist={seasonSorted} />\n\t\t</div>\n\t);\n}\n\nexport default Home;\n","import React from 'react';\n\n\nfunction Header(props) {\n        return (\n\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<h1>{props.artist.name || 'Ying Yang Twins'}: For All Seasons</h1>\n\t\t\t\t\t</div>\n\t\t\t\t);\n    }\n\nexport default Header;","import React from 'react';\n\nfunction Login(props) {\n    return (\n\t\t\t<div>\n\t\t\t\t<h1>Welcome to Ying Yang Twins: For All Seasons!</h1>\n\t\t\t\t<h3>spotify log in:</h3>\n\t\t\t\t<a href='https://seasons-backend.herokuapp.com/auth/spotify'>press</a>\n\t\t\t</div>\n\t\t);\n}\n\nexport default Login;","import React, { useState, useEffect } from 'react';\n\n//ying yang twins artist search request: 'https://api.spotify.com/v1/search?q=ying%20yang%20twins&type=artist'\n// artist id: \"44PA0rCQXikgOWbfY7Fq7m\", from search: artists[0].images (array of three with heights 480, 200, 64), artists[0].name.\n\n//ying yang twins track search request: 'https://api.spotify.com/v1/search?q=artist:ying%20yang%20twins&type=track&limit=50' (&offset=50) <- search is in res.tracks.next\n//pretty accurate in terms of high to low popularity. tracks.items[index].id - could potentially offset to index 50 to get 100 results to max out audio features analysis.\n\n//audio features by id: set a variable for each track's danceability, energy, and valence divided by three to weight equally (may change) (tempo? BPM apparently included in danceability). valence is literally about weighing happy vs sad sounding, so it might be interesting to increase weight of valence\n\nfunction ArtistForm(props) {\n\tlet formArtist = '';\n\n\tconst loadArtist = (event) => {\n        event.preventDefault();\n        fetch(`https://api.spotify.com/v1/search?q=${formArtist}&type=artist`, {\n        headers: {\n\t\t\t\t'Content-Type': 'application/json',\n\t\t\t\t'Authorization': `Bearer ${props.access}`\n            }\n        })\n        .then(res => res.json())\n        .then(json => {\n            console.log(json)\n            props.setArtist(json.artists.items[0])\n        })\n        .catch(err => console.log(err))\n        \n    };\n\n\treturn (\n\t\t<div>\n\t\t\t<form onSubmit={loadArtist}>\n\t\t\t\t<input type='text' placeholder='Ying Yang Twins' onChange={(event) => (formArtist = event.target.value)}/>\n\t\t\t\t<input type='submit' />\n\t\t\t</form>\n\t\t</div>\n\t);\n}\n\nexport default ArtistForm;\n","import React, {useState} from 'react';\n\nfunction Player(props) {\n    let [currentlyPlaying, setCurrentlyPlaying] = useState('click on a song to play!')\n\tfunction pause() {\n\t\tfetch(\n\t\t\t`https://api.spotify.com/v1/me/player/pause?device_id=${props.playerId}`,\n\t\t\t{\n\t\t\t\tmethod: 'PUT',\n\t\t\t\theaders: {\n\t\t\t\t\t'Content-Type': 'application/json',\n\t\t\t\t\tAuthorization: `Bearer ${props.access}`,\n\t\t\t\t},\n\t\t\t}\n\t\t);\n\t}\n\t//title //artist //album art //timestamps //play, pause, back, next\n\treturn (\n\t\t<div>\n            <main>{currentlyPlaying}</main>\n\t\t\t<button onClick={pause}>pause</button>\n\t\t</div>\n\t);\n}\n\nexport default Player;\n","//https://github.com/nbarsova/spotify-react-demo/blob/master/src/ScriptCache.js\nexport class ScriptCache {\n\tconstructor(scripts, onSuccess) {\n\t\tthis.loaded = [];\n\t\tthis.failed = [];\n\t\tthis.pending = [];\n\t\tthis.callbacks = {};\n\t\tthis.onSuccess = onSuccess;\n\t\tthis.load(scripts);\n\t}\n\n\tload(scripts) {\n\t\tfor (const script of scripts) {\n\t\t\tthis.loadSrc(script.name);\n\t\t\tif (typeof script.callback !== 'undefined') {\n\t\t\t\tthis.callbacks[script.name] = script.callback;\n\t\t\t}\n\t\t}\n\t}\n\n\tloadSrc(src) {\n\t\tif (this.loaded.indexOf(src) >= 0) {\n\t\t\treturn Promise.resolve(src);\n\t\t}\n\n\t\tthis.pending.push(src);\n\n\t\treturn this.scriptTag(src)\n\t\t\t.then(() => {\n\t\t\t\tif (this.callbacks.hasOwnProperty(src)) {\n\t\t\t\t\tconsole.log(this);\n\t\t\t\t\tthis.callbacks[src](); // run a callback for this script if it exists\n\t\t\t\t}\n\t\t\t\tif (this.pending.length === 0 && this.onSuccess) {\n\t\t\t\t\tthis.onSuccess();\n\t\t\t\t}\n\t\t\t})\n\t\t\t.catch(() => {\n\t\t\t\tconsole.log('Loading ' + src + ' rejected');\n\t\t\t});\n\t}\n\n\tscriptTag(src, cb) {\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tlet resolved = false;\n\t\t\tlet errored = false;\n\t\t\tlet body = document.getElementsByTagName('body')[0];\n\t\t\tlet tag = document.createElement('script');\n\n\t\t\ttag.type = 'text/javascript';\n\t\t\ttag.async = false; // Load in order\n\n\t\t\ttag.onreadystatechange = function () {\n\t\t\t\tif (resolved) {\n\t\t\t\t\treturn handleLoad();\n\t\t\t\t}\n\t\t\t\tif (errored) {\n\t\t\t\t\treturn handleReject();\n\t\t\t\t}\n\t\t\t\tconst state = tag.readyState;\n\t\t\t\tif (state === 'complete') {\n\t\t\t\t\thandleLoad();\n\t\t\t\t} else if (state === 'error') {\n\t\t\t\t\thandleReject();\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tconst handleLoad = (evt) => {\n\t\t\t\tresolved = true;\n\t\t\t\tthis.pending.splice(this.pending.indexOf(src), 1);\n\t\t\t\tthis.loaded.push(src);\n\t\t\t\tresolve(src);\n\t\t\t};\n\t\t\tconst handleReject = (evt) => {\n\t\t\t\terrored = true;\n\t\t\t\tthis.pending.splice(this.pending.indexOf(src), 1);\n\t\t\t\tthis.failed.push(src);\n\t\t\t\treject(src);\n\t\t\t};\n\n\t\t\ttag.addEventListener('load', handleLoad);\n\t\t\ttag.addEventListener('error', handleReject);\n\n\t\t\ttag.src = src;\n\t\t\tbody.appendChild(tag);\n\t\t\treturn tag;\n\t\t});\n\t}\n}\n","import React, { useState, useEffect } from 'react';\nimport './App.css';\nimport Home from './Home';\nimport Header from './Header';\nimport Login from './Login';\nimport ArtistForm from './ArtistForm';\nimport Playlist from './Playlist';\nimport Player from './Player';\nimport { ScriptCache } from './ScriptCache';\n\n//handle login - get token - initialize player\n\nfunction App() {\n\tlet [playerId, setPlayerId] = useState('');\n\tlet [access, setAccess] = useState('');\n\tlet [refresh, setRefresh] = useState('');\n\tlet [id, setId] = useState('');\n\tlet [artist, setArtist] = useState('');\n\n\t//ying yang image defaults: artist.images\n\t// 0: {height: 480, url: \"https://i.scdn.co/image/8a522c7faa13cf4321ca6bea075fd97f75f40cfe\", width: 480}\n\t//1: {height: 200, url: \"https://i.scdn.co/image/b434cb66ee3b358bd1707bce3e7371f158184f8c\", width: 200}\n\t//2: {height: 64, url: \"https://i.scdn.co/image/f57a69bfb8aef58b2b2cee85cb82eddab8daeca1\", width: 64}\n\n\t//ying yang id default: artist.id = 44PA0rCQXikgOWbfY7Fq7m\n\tlet [tracks, setTracks] = useState('');\n\tlet [season, setSeason] = useState('neutral');\n\n\tfunction spotifySDKCallback() {\n\t\twindow.onSpotifyWebPlaybackSDKReady = () => {\n\t\t\tif (access) {\n\t\t\t\tconst token = access;\n\t\t\t\tconst player = new window.Spotify.Player({\n\t\t\t\t\tname: 'For All Seasons',\n\t\t\t\t\tgetOAuthToken: (cb) => {\n\t\t\t\t\t\tcb(token);\n\t\t\t\t\t},\n\t\t\t\t});\n\t\t\t\t// Error handling\n\t\t\t\tplayer.addListener('initialization_error', ({ message }) => {\n\t\t\t\t\tconsole.error(message);\n\t\t\t\t});\n\t\t\t\tplayer.addListener('authentication_error', ({ message }) => {\n\t\t\t\t\tconsole.error(message);\n\t\t\t\t});\n\t\t\t\tplayer.addListener('account_error', ({ message }) => {\n\t\t\t\t\tconsole.error(message);\n\t\t\t\t});\n\t\t\t\tplayer.addListener('playback_error', ({ message }) => {\n\t\t\t\t\tconsole.error(message);\n\t\t\t\t});\n\n\t\t\t\t// Playback status updates\n\t\t\t\tplayer.addListener('player_state_changed', (state) => {\n\t\t\t\t\tconsole.log(state);\n\t\t\t\t});\n\n\t\t\t\t// Ready\n\t\t\t\tplayer.addListener('ready', ({ device_id }) => {\n\t\t\t\t\tsetPlayerId(device_id);\n\t\t\t\t\tconsole.log('Ready with Device ID', device_id);\n\t\t\t\t});\n\n\t\t\t\t// Not Ready\n\t\t\t\tplayer.addListener('not_ready', ({ device_id }) => {\n\t\t\t\t\tconsole.log('Device ID has gone offline', device_id);\n\t\t\t\t});\n\n\t\t\t\t// Connect to the player!\n\t\t\t\tplayer.connect();\n\t\t\t}\n\t\t};\n\t}\n\n\t//allows loading of spotify player script tags into html - see below\n\t//https://github.com/nbarsova/spotify-react-demo/blob/master/src/ScriptCache.js\n\tnew ScriptCache([\n\t\t{\n\t\t\tname: 'https://sdk.scdn.co/spotify-player.js',\n\t\t\tcallback: spotifySDKCallback,\n\t\t},\n\t]);\n\n\tuseEffect(() => {\n\t\t//grab access token and user id after login\n\t\tconst queryString = require('query-string');\n\t\tlet parsed = queryString.parse(window.location.search);\n\t\tsetAccess(parsed.accesstoken);\n\t\tsetRefresh(parsed.refreshtoken);\n\t\tsetId(parsed.id);\n  }, []);\n  \n  //play funtion for links and player\n\tfunction play(uri) {\n\t\tfetch(`https://api.spotify.com/v1/me/player/play?device_id=${playerId}`, {\n\t\t\tmethod: 'PUT',\n\t\t\theaders: {\n\t\t\t\t'Content-Type': 'application/json',\n\t\t\t\tAuthorization: `Bearer ${access}`,\n\t\t\t},\n\t\t\tbody: JSON.stringify({ \"uris\": [uri] }),\n\t\t}).catch((err) => console.log(err));\n\t}\n\n\t//if there is no access token render login\n\tif (!access) {\n\t\treturn <Login />;\n\t} else {\n\t\treturn (\n\t\t\t<div>\n\t\t\t\t<Header artist={artist} />\n\t\t\t\t<ArtistForm access={access} setArtist={setArtist} />\n        <Player playerId={playerId} play={play} access={access}/>\n\t\t\t\t<Home\n\t\t\t\t\tplayerId={playerId}\n\t\t\t\t\tsetArtist={setArtist}\n\t\t\t\t\tartist={artist}\n\t\t\t\t\tsetTracks={setTracks}\n\t\t\t\t\ttracks={tracks}\n\t\t\t\t\taccess={access}\n          id={id}\n          play={play}\n\t\t\t\t/>\n\t\t\t\t<Playlist artist={artist} access={access} />\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './Components/App';\nimport {BrowserRouter as Router} from 'react-router-dom'\n\nReactDOM.render(\n  <Router>\n    <App />\n  </Router>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}