(this["webpackJsonpfor-all-seasons"]=this["webpackJsonpfor-all-seasons"]||[]).push([[0],{18:function(e,t,n){e.exports=n(43)},23:function(e,t,n){},24:function(e,t,n){},43:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),r=n(12),o=n.n(r),i=(n(23),n(2));n(24);var s=function(e){var t=[];return e.playlist&&(t=e.playlist.map((function(t){return c.a.createElement("li",{onClick:function(){return e.play(t.uri)}},t.name)}))),c.a.createElement("div",null,c.a.createElement("ul",null,t||"LOADING"))};var l=function(e){var t=Object(a.useState)([]),n=Object(i.a)(t,2),r=n[0],o=n[1],l=Object(a.useState)([]),u=Object(i.a)(l,2),p=u[0],d=u[1],f=[];if(Object(a.useEffect)((function(){fetch("https://api.spotify.com/v1/search?q=artist:".concat(e.artist.name||"Ying Yang Twins","&type=track&limit=50"),{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e.access)}}).then((function(e){return e.json()})).then((function(t){var n=t.tracks.items.sort((function(e,t){return t.popularity-e.popularity})),a=[],c=!1;console.log(n);for(var r=0;r<n.length;r++){c=!1;for(var i=n[r].name.split("(")[0],s=0;s<a.length;s++){var l=a[s].name.split("(")[0];if(i.includes(l)||l.includes(i)){c=!0;break}}!1===c&&a.push({name:n[r].name,cover:n[r].album.images[2],artists:n[r].artists,id:n[r].id,uri:n[r].uri})}var u=[];a.forEach((function(e){return u.push(e.id)})),o(u),console.log(a),e.setTracks(a)}))}),[e.artist]),Object(a.useEffect)((function(){fetch("https://api.spotify.com/v1/audio-features/?ids=".concat(r.join(",")),{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e.access)}}).then((function(e){return e.json()})).then((function(e){d(e.audio_features)}))}),[e.tracks]),p.length>10){var h=[];console.log(p);for(var m=0;m<p.length;m++)if(p[m].danceability&&p[m].energy&&p[m].valence){var v=0;v=(p[m].danceability+p[m].energy+p[m].valence)/3,h.push(v.toFixed(3))}else h.push(-1);console.log(h);var y=0;e.tracks.forEach((function(e){e.seasonScore=h[y],y++})),console.log(e.tracks),f=e.tracks.sort((function(e,t){return t.seasonScore-e.seasonScore})),console.log(f)}return c.a.createElement("div",null,c.a.createElement(s,{play:e.play,playlist:f}))};var u=function(e){return c.a.createElement("div",null,c.a.createElement("h1",null,e.artist.name||"Ying Yang Twins",": For All Seasons"))};var p=function(e){return c.a.createElement("div",null,c.a.createElement("h1",null,"Welcome to Ying Yang Twins: For All Seasons!"),c.a.createElement("h3",null,"spotify log in:"),c.a.createElement("a",{href:"https://seasons-backend.herokuapp.com/auth/spotify"},"press"))};var d=function(e){var t="";return c.a.createElement("div",null,c.a.createElement("form",{onSubmit:function(n){n.preventDefault(),fetch("https://api.spotify.com/v1/search?q=".concat(t,"&type=artist"),{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e.access)}}).then((function(e){return e.json()})).then((function(t){console.log(t),e.setArtist(t.artists.items[0])})).catch((function(e){return console.log(e)}))}},c.a.createElement("input",{type:"text",placeholder:"Ying Yang Twins",onChange:function(e){return t=e.target.value}}),c.a.createElement("input",{type:"submit"})))};var f=function(e){var t=Object(a.useState)("click on a song to play!"),n=Object(i.a)(t,2),r=n[0];return n[1],c.a.createElement("div",null,c.a.createElement("main",null,r),c.a.createElement("button",{onClick:function(){fetch("https://api.spotify.com/v1/me/player/pause?device_id=".concat(e.playerId),{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e.access)}})}},"pause"))},h=n(13),m=n(14),v=n(15),y=function(){function e(t,n){Object(m.a)(this,e),this.loaded=[],this.failed=[],this.pending=[],this.callbacks={},this.onSuccess=n,this.load(t)}return Object(v.a)(e,[{key:"load",value:function(e){var t,n=Object(h.a)(e);try{for(n.s();!(t=n.n()).done;){var a=t.value;this.loadSrc(a.name),"undefined"!==typeof a.callback&&(this.callbacks[a.name]=a.callback)}}catch(c){n.e(c)}finally{n.f()}}},{key:"loadSrc",value:function(e){var t=this;return this.loaded.indexOf(e)>=0?Promise.resolve(e):(this.pending.push(e),this.scriptTag(e).then((function(){t.callbacks.hasOwnProperty(e)&&(console.log(t),t.callbacks[e]()),0===t.pending.length&&t.onSuccess&&t.onSuccess()})).catch((function(){console.log("Loading "+e+" rejected")})))}},{key:"scriptTag",value:function(e,t){var n=this;return new Promise((function(t,a){var c=!1,r=!1,o=document.getElementsByTagName("body")[0],i=document.createElement("script");i.type="text/javascript",i.async=!1,i.onreadystatechange=function(){if(c)return s();if(r)return l();var e=i.readyState;"complete"===e?s():"error"===e&&l()};var s=function(a){c=!0,n.pending.splice(n.pending.indexOf(e),1),n.loaded.push(e),t(e)},l=function(t){r=!0,n.pending.splice(n.pending.indexOf(e),1),n.failed.push(e),a(e)};return i.addEventListener("load",s),i.addEventListener("error",l),i.src=e,o.appendChild(i),i}))}}]),e}();var g=function(){var e=Object(a.useState)(""),t=Object(i.a)(e,2),r=t[0],o=t[1],h=Object(a.useState)(""),m=Object(i.a)(h,2),v=m[0],g=m[1],b=Object(a.useState)(""),j=Object(i.a)(b,2),E=(j[0],j[1]),k=Object(a.useState)(""),O=Object(i.a)(k,2),S=O[0],w=O[1],T=Object(a.useState)(""),A=Object(i.a)(T,2),_=A[0],L=A[1],C=Object(a.useState)(""),Y=Object(i.a)(C,2),x=Y[0],B=Y[1],D=Object(a.useState)("neutral"),I=Object(i.a)(D,2);function P(e){fetch("https://api.spotify.com/v1/me/player/play?device_id=".concat(r),{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(v)},body:JSON.stringify({uris:[e]})}).catch((function(e){return console.log(e)}))}return I[0],I[1],new y([{name:"https://sdk.scdn.co/spotify-player.js",callback:function(){window.onSpotifyWebPlaybackSDKReady=function(){if(v){var e=v,t=new window.Spotify.Player({name:"For All Seasons",getOAuthToken:function(t){t(e)}});t.addListener("initialization_error",(function(e){var t=e.message;console.error(t)})),t.addListener("authentication_error",(function(e){var t=e.message;console.error(t)})),t.addListener("account_error",(function(e){var t=e.message;console.error(t)})),t.addListener("playback_error",(function(e){var t=e.message;console.error(t)})),t.addListener("player_state_changed",(function(e){console.log(e)})),t.addListener("ready",(function(e){var t=e.device_id;o(t),console.log("Ready with Device ID",t)})),t.addListener("not_ready",(function(e){var t=e.device_id;console.log("Device ID has gone offline",t)})),t.connect()}}}}]),Object(a.useEffect)((function(){var e=n(25).parse(window.location.search);g(e.accesstoken),E(e.refreshtoken),w(e.id)}),[]),v?c.a.createElement("div",null,c.a.createElement(u,{artist:_}),c.a.createElement(d,{access:v,setArtist:L}),c.a.createElement(f,{playerId:r,play:P,access:v}),c.a.createElement(l,{playerId:r,setArtist:L,artist:_,setTracks:B,tracks:x,access:v,id:S,play:P}),c.a.createElement(s,{artist:_,access:v})):c.a.createElement(p,null)},b=n(17);o.a.render(c.a.createElement(b.a,null,c.a.createElement(g,null)),document.getElementById("root"))}},[[18,1,2]]]);
//# sourceMappingURL=main.cbac739b.chunk.js.map